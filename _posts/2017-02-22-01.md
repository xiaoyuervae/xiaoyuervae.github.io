---
layout: post
title: "git本地配置多账号"
date: 2017-02-22
description: "xiaoyuervae的博客"
tag: 博客 
---

## 本地新建一个SSH-KEY

```
#新建SSH key
# 切换到C:\Users\Administrator\.ssh
$ cd ~/.ssh
# 新建工作的SSH key
ssh-keygen -t rsa -C "xiaoyuervae@icloud.com"
# 设置名称为id_rsa_demo
Enter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa): id_rsa_xye
```
## 新的密钥添加到SSH-Agent中

> ssh-add C:\Users\guanchun.yu\.ssh\id_rsa_xye
![image](http://xiaoyuervae-1252527405.cosgz.myqcloud.com/%E6%B7%BB%E5%8A%A0ssh-key.png)

如果出现了Could not open a connection to your authentication agent的错误，就试着用以下命令：


```
ssh-agent bash
ssh-add C:\Users\guanchun.yu\.ssh\id_rsa_xye
```

## 修改config文件
如果在ssh目录下面没有找到config文件，就新建一个
> touch config

打开config文件进行编辑，config的配置如下

```
# 该文件用于配置私钥对应的服务器
# Default github user(first@mail.com)
Host github.com
 HostName github.com
 User git
 IdentityFile C:/Users/guanchun.yu/.ssh/id_rsa_xye

```
> 其规则就是：从上至下读取config的内容，在每个Host下寻找对应的私钥。这里将GitHub SSH仓库地址中的git@github.com替换成新建的Host别名如：github2，那么原地址是：git@github.com:funpeng/Mywork.git，替换后应该是：github2:funpeng/Mywork.git.

## 打开新生成的/.ssh/id_rsa_xye.pub文件，将里面的内容添加到GitHub后台。
![image](http://xiaoyuervae-1252527405.cosgz.myqcloud.com/%E8%AE%BE%E7%BD%AEssh_pub.png)


## 测试

> ssh -T git@github.com

然后就可以使用了，新增加账号的话也是这样操作，将ssh_key的配置写到config文件中。



